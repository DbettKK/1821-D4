# API文档

## 不需要Token的API

### 1. 发送注册邮件接口

##### 描述
发送验证码到指定邮箱

##### 请求URL
` http://175.24.121.113:8000/myapp/email `

##### 请求方式
POST
##### 参数

|参数名|必选|类型|说明|
|:----    |:---|:----- |-----   |
|email |是  |string |邮箱   |

##### 返回示例

``` 
{
    "info": "发送成功",
    "code": 200
}
```
##### 返回状态码

200——成功

### 2. 发送找回密码邮件接口

##### 描述
发送验证码到指定邮箱

##### 请求URL
` http://175.24.121.113:8000/myapp/email2/ `

##### 请求方式
POST
##### 参数

|参数名|必选|类型|说明|
|:----    |:---|:----- |-----   |
|email |是  |string |邮箱   |

##### 返回示例

``` 
{
    "info": true,
    "code": 200
}
```

##### 返回状态码

200——成功

### 3.找回密码接口

##### 描述
类似于用邮箱重置密码

##### 请求URL
` http://175.24.121.113:8000/myapp/findpassword/ `
##### 请求方式
POST
##### 参数

|参数名|必选|类型|说明|
|:----    |:---|:----- |-----   |
|username |是  |string |用户名   |
|email |是  |string |邮箱   |
|password_new |是  |string |新密码   |
|code |是  |string |邮件里的验证码  |


##### 返回示例

``` 
{
    "info":  "找回成功",
    "code": 200,
},
{
    "info":  "验证码错误",
    "code": 403,
},
```

##### 返回状态码

200——成功

400——参数不完整 

403——验证码错误

### 4.用户注册接口

##### 描述

用于用户注册

注：注册之前需要先POST`http://175.24.121.113:8000/myapp/testemail`，并带上email参数，然后再post该api

##### 请求URL
- ` http://175.24.121.113:8000/myapp/register `
  
##### 请求方式
- POST 

##### 参数

|参数名|必选|类型|说明|
|:----    |:---|:----- |-----   |
|username |是  |string |用户名   |
|password |是  |string | 密码    |
|password2 |是  |string | 重复密码 |
|email     |是  |string | 邮箱    |
|phone_num     |是  |string | 手机号    |
|code |是 |string | 验证码 |

##### 返回示例 

``` 
{
    "info": "success",
    "code": 200,
    "data": {
        "id": 13,
        "username": "刘六",
        "email": "12@12.12",
        "phone_num": "12345678911"
    }
}
```

##### 返回参数说明 

|参数名|类型|说明|
|:-----  |:-----|-----                           |
|info |string   |信息，可能成功或者失败原因  |
|code |int   |返回状态码，200 400  |
|data |dic   |注册的用户完整信息  |

##### 返回状态码

200——成功

400——参数不完整

403——验证码错误

****

### 5.用户登录接口

##### 描述

用于用户登录

##### 请求URL

- ` http://175.24.121.113:8000/myapp/login`

##### 请求方式

- POST 

##### 参数

| 参数名    | 必选 | 类型   | 说明     |
| :-------- | :--- | :----- | -------- |
| username  | 是   | string | 用户名   |
| password  | 是   | string | 密码     |

##### 返回示例 

``` 
{
    "info": "success",
    "token": "876c25860f8ce6606eb25f7dd8e1bf83",
    "code": 200,
    "data": {
        "id": 10,
        "username": "lisi",
        "email": "15@13.13",
        "phone_num": "12345678999"
    }
}
```

##### 返回参数说明 

| 参数名 | 类型   | 说明                       |
| :----- | :----- | -------------------------- |
| info   | string | 信息，可能成功或者失败原因 |
| token  | string | token信息                  |
| code   | int    | 返回状态码                 |
| data   | dic    | 登录的用户完整信息         |

##### 返回状态码

200——成功

400——参数不完整

403——用户名错误、密码错误

## 需要Token的API

### 1.用户个人信息接口

##### 描述

用于请求用户信息或者修改用户信息

##### 请求URL
- ` http://175.24.121.113:8000/myapp/user/info `
  
##### 请求方式
- GET——用于请求用户详情信息
- POST——用于修改用户信息
**注：在POST此页面之前请先POST`http://175.24.121.113:8000/myapp/user/info`页面输入旧密码后再POST此页面**

##### 参数
GET方式

| 参数名 | 必选 | 类型 | 说明 |
| :----- | :--- | :--- | ---- |
| 无     | 无   | 无   | 无   |
POST方式

| 参数名       | 必选 | 类型   | 说明       |
| :----------- | :--- | :----- | ---------- |
| new_password | 是   | string | 新密码     |
| email        | 是   | string | 新邮箱     |
| phone_num    | 是   | string | 新电话号码 |

##### 返回示例 
POST请求和GET请求都返回详细信息，只是POST请求返回的是修改完成后用户的信息

``` 
{
    "info": "success",
    "code": 200,
    "data": {
        "id": 10,
        "username": "lisi",
        "email": "15@13.13",
        "phone_num": "12345678999"
    }
}
```

##### 返回参数说明 

| 参数名 | 类型   | 说明         |
| :----- | :----- | ------------ |
| info   | string | 返回信息     |
| code   | int    | 返回状态码   |
| data   | dic    | 返回用户信息 |

##### 返回状态码

200——成功

403——token有问题

****

### 2.用户个人信息修改验证接口

##### 描述

用于在用户修改信息前验证其是否具有修改信息的资格

前端可在拿到数据后对相应修改信息的表单进行复现

##### 请求URL

- ` http://175.24.121.113:8000/myapp/user/modify`

##### 请求方式

- POST

##### 参数

POST方式

| 参数名       | 必选 | 类型   | 说明   |
| :----------- | :--- | :----- | ------ |
| old_password | 是   | string | 旧密码 |

##### 返回示例 

``` 
{
    "info": "success",
    "code": 200,
    "data": {
        "id": 10,
        "username": "lisi",
        "email": "15@13.13",
        "phone_num": "12345678999"
    }
}
```

##### 返回参数说明 

| 参数名 | 类型   | 说明         |
| :----- | :----- | ------------ |
| info   | string | 返回信息     |
| code   | int    | 返回状态码   |
| data   | dic    | 返回用户信息 |

##### 返回状态码

200——成功

400——参数不完整

403——token问题、新旧密码相同