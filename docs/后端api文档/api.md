# API文档

## 不需要Token的API

### 用户注册接口

##### 描述

用于用户注册

##### 请求URL
- ` http://175.24.121.113:8000/myapp/register `
  
##### 请求方式
- POST 

##### 参数

|参数名|必选|类型|说明|
|:----    |:---|:----- |-----   |
|username |是  |string |用户名   |
|password |是  |string | 密码    |
|password2 |是  |string | 重复密码 |
|email     |是  |string | 邮箱    |
|phone_num     |是  |string | 手机号    |

##### 返回示例 

``` 
{
    "info": "success",
    "code": 200,
    "data": {
        "id": 13,
        "username": "刘六",
        "email": "12@12.12",
        "phone_num": "12345678911"
    }
}
```

##### 返回参数说明 

|参数名|类型|说明|
|:-----  |:-----|-----                           |
|info |string   |信息，可能成功或者失败原因  |
|code |int   |返回状态码，200 400  |
|data |dic   |注册的用户完整信息  |

****

### 用户登录接口

##### 描述

用于用户登录

##### 请求URL

- ` http://175.24.121.113:8000/myapp/login`

##### 请求方式

- POST 

##### 参数

| 参数名    | 必选 | 类型   | 说明     |
| :-------- | :--- | :----- | -------- |
| username  | 是   | string | 用户名   |
| password  | 是   | string | 密码     |

##### 返回示例 

``` 
{
    "info": "success",
    "token": "876c25860f8ce6606eb25f7dd8e1bf83",
    "code": 200,
    "data": {
        "id": 10,
        "username": "lisi",
        "email": "15@13.13",
        "phone_num": "12345678999"
    }
}
```

##### 返回参数说明 

| 参数名 | 类型   | 说明                       |
| :----- | :----- | -------------------------- |
| info   | string | 信息，可能成功或者失败原因 |
| token  | string | token信息                  |
| code   | int    | 返回状态码                 |
| data   | dic    | 登录的用户完整信息         |



## 需要Token的API

### 用户个人信息接口

##### 描述

用于请求用户信息或者修改用户信息

##### 请求URL
- ` http://175.24.121.113:8000/myapp/user/info `
  
##### 请求方式
- GET——用于请求用户详情信息
- POST——用于修改用户信息
**注：在POST此页面之前请先POST`http://175.24.121.113:8000/myapp/user/info`页面输入旧密码后再POST此页面**

##### 参数
GET方式

| 参数名 | 必选 | 类型 | 说明 |
| :----- | :--- | :--- | ---- |
| 无     | 无   | 无   | 无   |
POST方式

| 参数名       | 必选 | 类型   | 说明       |
| :----------- | :--- | :----- | ---------- |
| new_password | 是   | string | 新密码     |
| email        | 是   | string | 新邮箱     |
| phone_num    | 是   | string | 新电话号码 |

##### 返回示例 
POST请求和GET请求都返回详细信息，只是GPOST请求返回的是修改完成后用户的信息

``` 
{
    "info": "success",
    "code": 200,
    "data": {
        "id": 10,
        "username": "lisi",
        "email": "15@13.13",
        "phone_num": "12345678999"
    }
}
```

##### 返回参数说明 

| 参数名 | 类型   | 说明         |
| :----- | :----- | ------------ |
| info   | string | 返回信息     |
| code   | int    | 返回状态码   |
| data   | dic    | 返回用户信息 |

****

### 用户个人信息修改验证接口

##### 描述

用于在用户修改信息前验证其是否具有修改信息的资格

前端可在拿到数据后对相应修改信息的表单进行复现

##### 请求URL

- ` http://175.24.121.113:8000/myapp/user/modify`

##### 请求方式

- POST

##### 参数

POST方式

| 参数名       | 必选 | 类型   | 说明   |
| :----------- | :--- | :----- | ------ |
| old_password | 是   | string | 旧密码 |

##### 返回示例 

``` 
{
    "info": "success",
    "code": 200,
    "data": {
        "id": 10,
        "username": "lisi",
        "email": "15@13.13",
        "phone_num": "12345678999"
    }
}
```

##### 返回参数说明 

| 参数名 | 类型   | 说明         |
| :----- | :----- | ------------ |
| info   | string | 返回信息     |
| code   | int    | 返回状态码   |
| data   | dic    | 返回用户信息 |


